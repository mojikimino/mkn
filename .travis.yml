language: python
jobs:
  include:
  - services: docker
  - os: osx
    language: shell
  - os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"
    - ln -s /c/Python38/python.exe /c/Python38/python3.exe
env:
  global:
  - TWINE_USERNAME=__token__
install:
- python3 -m pip install cibuildwheel==1.3.0
script:
- python3 -m cibuildwheel --output-dir wheelhouse
after_success:
- |
  if [[ $TRAVIS_TAG ]]; then
    python3 -m pip install twine
    python3 -m twine upload wheelhouse/*.whl
  fi
deploy:
  provider: pypi
  user: mojikimino
  password:
    secure: MX0gLqQ123xpFnK0OC1DypRktFMEiy2W54BbHk+AFedW5n2RSMP/pacLjTonNFfVOZE+34ls2oyNzwsofFBhWi+A/mVYzlddD5dZPW20cXCyc6snnlkwib4XAbQz+x5ls2BvsTZu4/665gytXutjCs0Rn0PhbySr+NH1g7TMPGUKci9UAG47X5Tse7KHmBXPDqbCTBzyuc2ARMMRtWeMYuD6pgj0HzElM3rPm4ytqIkna8k03f6ADr5mg3AhU9q/asXZZZ/nBEfF+h9w/iLLOzInBQHKcWcJhhewa8MC8v2jPH9gpklZuf04P0j9yZjHBTEiHJbxqtUR+eXeO2OU3jxGmQ8X1m0K/WnyH27CW4v8koDdnzshChdai7t6NC6nNHFCVQ+CEbWW19b5c+qTEdXIO6aoJf0/Vf0BuAkMA/QrW/FwghfgK0gZOiP+q3gyz8kXfIDoZUe9FWRddn/2HG1IavMzTx+D2vBJSGCWzTWmdpKthOFuc/OfbkyzjmTWeDxlRCB3YxklP4NU84+ZvlNjqnNvzKxdWPV0Vd+Gn+I5xK48TL0XwLNhhTxIovFW4lJt54GWmO4Rmz5/mIuQdt6YZzCP2qr8NIdX5HAzTOsy3dhfFZji/BI9MOEQ3TZ7MlXXHYiIfmQ1izb+kkvGau4DQGovZ7dxCQqq6q3MZ2k=
  on:
    tags: true
